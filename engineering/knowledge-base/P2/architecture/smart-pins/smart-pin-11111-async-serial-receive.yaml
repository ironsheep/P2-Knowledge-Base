# Smart Pin Mode: %11111 - Async Serial Receive  
# Silicon Doc Reference: part4-smart-pins.txt, page 75
# Layer 1: Direct Silicon Doc extraction

mode_id: "%11111"

mode_name: "Async Serial Receive"

mode_group: "communication"

mode_complexity: "intermediate"

dac_mode_dependency: false

pin_pairing: "none"

operation_description: |
  Async serial receive mode provides UART-style serial reception with automatic start bit detection,
  data sampling, parity checking, and stop bit validation. Received data available via RDPIN.
  Baud rate up to clock/3 supported. Automatically handles frame synchronization.

x_parameter:
  usage: "Baud rate configuration"
  bit_fields:
    - range: "X[31:0]"
      purpose: "Baud rate divisor (clocks per bit)"
      valid_values:
        min: 3
        max: 4294967295
        special_values:
          - value: 1667
            meaning: "9600 baud at 160MHz"

y_parameter:
  usage: "Not used in receive mode"

z_result:
  data_type: "Received data and status"
  bit_interpretation:
    - range: "Z[7:0]"
      meaning: "Received data byte"
    - range: "Z[31:8]"
      meaning: "Status and frame information"

timing_specifications:
  clock_relationship: "Baud rate sampling based on X parameter"
  update_frequency: "Data received at configured baud rate"

in_signal_behavior:
  trigger_conditions:
    - "Character received"
    - "Frame error detected"
  acknowledgment_method: "rdpin"


initialization_requirement:
  critical: true
  description: "Smart pin MUST be reset before configuration"
  requirement: |
    The smart pin MUST be reset (DIR=0) before any configuration or reconfiguration.
    This ensures the smart pin is in a known state and prevents configuration conflicts.
  reset_sequence:
    pasm2: |
      DIRL  pin         ' REQUIRED: Reset smart pin (DIR=0)
      WRPIN mode, pin   ' Configure mode
      WXPIN x, pin      ' Set X parameter
      WYPIN y, pin      ' Set Y parameter
      DIRH  pin         ' Enable smart pin (DIR=1)
    spin2: |
      PINCLEAR(pin)              ' Reset pin (DIR=0, WRPIN=0)
      PINSTART(pin, mode, x, y)  ' Configure and enable
      ' OR manually:
      PINFLOAT(pin)              ' Ensure DIR=0
      WRPIN(pin, mode)           ' Set mode
      WXPIN(pin, x)              ' Set X parameter
      WYPIN(pin, y)              ' Set Y parameter
      PINHIGH(pin)               ' Enable (DIR=1)

common_applications:
  - application: "UART communication"
    description: "Standard serial data reception"
    complexity_level: "intermediate"
  - application: "Sensor data input"
    description: "Receive data from serial sensors"
    complexity_level: "intermediate"

configuration_examples:
  - name: "9600 baud UART RX"
    description: "Standard 9600 baud serial receive"
    reset_code: "DIRL uart_rx                  ' REQUIRED: Reset before configuration"
    wrpin_code: "WRPIN ##%0000_0000_000_0000000000000_00_11111_0, uart_rx"
    wxpin_code: "WXPIN #1667, uart_rx"
    explanation: "9600 baud reception, input mode"

extraction_metadata:
  extraction_date: "2025-09-06"
  source_documents:
    - document: "Silicon Doc part4-smart-pins.txt"
      pages: [75]
      section: "%11111 = async serial receive"
  validation_status: "draft"
  completeness_score: 80
  technical_accuracy: "silicon_doc_verified"