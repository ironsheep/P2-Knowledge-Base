# Smart Pin Mode: %00010 (DAC_MODE) - DAC 16-bit Dither with Noise
# Silicon Doc Reference: part4-smart-pins.txt, pages 85-86
# Layer 1: Direct Silicon Doc extraction

mode_id: "%00010"

mode_name: "DAC 16-bit Dither with Pseudo-Random Noise"

mode_group: "dac"

mode_complexity: "advanced"

dac_mode_dependency: true

pin_pairing: "none"

operation_description: |
  DAC 16-bit dither mode with pseudo-random noise overrides M[7:0] to feed the pin's 8-bit DAC 
  with pseudo-randomly-dithered data on every clock. M[12:10] must be set to %101 for DAC_MODE.
  X[15:0] establishes sample period, Y[15:0] establishes DAC output value captured at each 
  sample period. Pseudo-random dithering randomly varies the 8-bit DAC between adjacent levels
  to achieve 16-bit effective resolution over time. If OUT is high, ADC is enabled for load measurement.

x_parameter:
  usage: "Sample period in clock cycles"
  bit_fields:
    - range: "X[15:0]"
      purpose: "Sample period for Y capture and IN generation"
      valid_values:
        min: 1
        max: 65535
        special_values:
          - value: 1
            meaning: "Immediate effect mode (IN stays high)"

y_parameter:
  usage: "16-bit DAC output value"
  bit_fields:
    - range: "Y[15:0]"
      purpose: "DAC output value with 16-bit resolution"
      valid_values:
        min: 0
        max: 65535

z_result:
  data_type: "16-bit ADC accumulation"
  bit_interpretation:
    - range: "Z[15:0]"
      meaning: "ADC measurement of DAC loading (if OUT high)"

timing_specifications:
  clock_relationship: "Updates DAC every clock with dithered value"
  update_frequency: "DAC updates every clock, Y captured at sample periods"

common_applications:
  - application: "High-resolution DAC"
    description: "16-bit effective DAC resolution from 8-bit hardware"
    complexity_level: "advanced"
  - application: "Audio DAC with dithering"
    description: "High-quality audio output with noise shaping"
    complexity_level: "advanced"

configuration_examples:
  - name: "16-bit audio DAC"
    description: "High-quality audio output with dithering"
    wrpin_code: "WRPIN ##%0000_0000_000_1010000000000_01_00010_0, audio_dac"
    wxpin_code: "WXPIN #3527, audio_dac"
    wypin_code: "WYPIN audio_sample, audio_dac"
    explanation: "DAC mode, ~44.1kHz sample rate, 16-bit audio samples"

extraction_metadata:
  extraction_date: "2025-09-06"
  source_documents:
    - document: "Silicon Doc part4-smart-pins.txt"
      pages: [85, 86]
      section: "%00010 and DAC_MODE = DAC 16-bit dither, noise"
  validation_status: "draft"
  completeness_score: 85
  technical_accuracy: "silicon_doc_verified"