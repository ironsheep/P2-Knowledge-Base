instruction: ALTSB
syntax: ALTSB Dest, {#}Src
encoding: EEEE 1001011 00I DDDDDDDDD SSSSSSSSS                     D 1
timing:
  cycles: 1
  type: fixed
group: Indirection Instruction - Alter subsequent SETBYTE instruction.
description: "ALTSB should be followed by SETBYTE\u2014 it modifies the SETBYTE instruction's Dest and\
  \ Num values, enabling.\n\nALTSB should be followed by SETBYTE\u2014 it modi\uFB01es the SETBYTE instruction's\
  \ Dest and Num values, enabling\n\ncode to iterate through multiple bytes of data across a range of\
  \ Reg RAM. SETBYTE's Dest value is changed to\n\n(Src + Dest[10:2]) & $1FF (for syntax 1), or to Dest[10:2]\
  \ (for syntax 2), and its Num value is changed to Dest[1:0].\n\nDest[10:2] corresponds to the target\
  \ long register's 9-bit address and Dest[1:0] is the byte ID within it; values of\n\n0\u20133 identify\
  \ individual bytes, by position, in least-signi\uFB01cant byte order. Iteratively executing ALTSB followed\
  \ by\n\nSETBYTE, and each time incrementing ALTSB's 11-bit Dest value by one, effectively writes a stream\
  \ of byte values\n\nto Reg RAM as if it were all made of byte-sized registers.\n\nIn syntax 1, Src consists\
  \ of two 9-bit \uFB01elds; a base address (Src[8:0]) and a signed auto-indexer (Src[17:9]).\n\n\u25CF\
  \   The base is the Reg RAM address where the series of bytes begins. ALTSB adds the long index\n\n\
  (Dest[10:2]) to the base (Src[8:0]) to locate the register holding the target byte. The byte ID (Dest[1:0])\n\
  \nidenti\uFB01es the byte's position within that long register.\n\n\u25CF   At the end of ALTSB execution,\
  \ the optional auto-indexer value (usually 0, 1, or -1) is added to the 11-bit\n\nindex (Dest) for a\
  \ future ALTSB+SETBYTE iteration.\n\nIn syntax 2, Dest serves as the full byte address\u2014 it's the\
  \ same format as in syntax 1, but represents the target\n\nlong's absolute address and its byte index\
  \ instead of the long's relative index (to add to a base) and byte index."
parameters:
- Dest is the register whose 11-bit value is the index, or the full byte address, for the SETBYTE instruction
  to operate on.
- Src is an optional register, 9-bit literal, or 18-bit augmented literal whose value contains a base
  long address (Src[8:0]; added to index (Dest[10:2]) for SETBYTE) and also an optional auto-indexer value
  (Src[17:9]; added to Dest at end of execution).
- "The base is the Reg RAM address where the series of bytes begins. ALTSB adds the long index (Dest[10:2])\
  \ to the base (Src[8:0]) to locate the register holding the target byte. The byte ID (Dest[1:0]) identi\uFB01\
  es the byte's position within that long register."
- At the end of ALTSB execution, the optional auto-indexer value (usually 0, 1, or -1) is added to the
  11-bit index (Dest) for a future ALTSB+SETBYTE iteration.
- The instruction following ALTSB is shielded from interrupt
- "ALTSB alters the next instruction regardless of its kind\u2014 the intention is for it to be a SETBYTE"
- "Field value modi\uFB01cation occurs in the instruction pipeline only; code is not altered, values do\
  \ not persist"
- "SETQ / SETQ2 does not affect ALTx instructions\u2014 the Q value passes through to the next instruction"
documentation_source: PASM2 Manual 2022/11/01 Pages 31-147
documentation_level: comprehensive
compiler_operand_format:
  name: operand_duiz
  pattern: D{,S/#}
  description: Destination, optional source (immediate bit set if no source)
  valueType: 5
compiler_encoding:
  operandFormat: 5
enhancement_source: PNUT_TS_v2.0_complete_operand_integration_2025-09-13
last_updated: '2025-09-19'
brief_description: Alter set byte
category: Indirection Instruction - Alter subsequent SETBYTE instruction.
result: The next instruction's pipelined Dest and Num values are altered to be (Src + Dest[10:2]) & $1FF,
  or just
syntax_variants:
- ALTSB Dest, {#}Src
- ALTSB Dest
- "ALTSB should be followed by SETBYTE\u2014 it modi\uFB01es the SETBYTE instruction's Dest and Num values,\
  \ enabling"
- SETBYTE, and each time incrementing ALTSB's 11-bit Dest value by one, effectively writes a stream of
  byte values
- index (Dest) for a future ALTSB+SETBYTE iteration.
usage_notes: "The instruction following ALTSB is shielded from interrupt\nALTSB alters the next instruction\
  \ regardless of its kind\u2014 the intention is for it to be a SETBYTE\nField value modi\uFB01cation\
  \ occurs in the instruction pipeline only; code is not altered, values do not persist\nSETQ / SETQ2\
  \ does not affect ALTx instructions\u2014 the Q value passes through to the next instruction"
manual_extraction_date: '2025-01-19'
