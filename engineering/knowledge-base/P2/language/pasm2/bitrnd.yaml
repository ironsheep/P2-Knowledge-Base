instruction: BITRND
syntax: BITRND Dest, {#}Src {WCZ}
encoding:
- EEEE 0100110 CZI DDDDDDDDD SSSSSSSSS                   D         Original D base bit Original D base
  bit         2
- EEEE 0100100 CZI DDDDDDDDD SSSSSSSSS                   D         Original D base bit Original D base
  bit         2
- EEEE 0100101 CZI DDDDDDDDD SSSSSSSSS                   D         Original D base bit Original D base
  bit         2
timing:
  cycles: 2
  type: fixed
group: Bit Operation Instruction - Set bit(s) random low/high.
description: "BITRND alters the Dest bit(s) designated by Src to each be an independent random low and\
  \ high value, based on Result: Dest bit(s) described by Src are each set randomly low or high; the rest\
  \ are left as-is. Z = original D[S[4:0]].\n\nBITRND alters the Dest bit(s) designated by Src to each\
  \ be an independent random low and high value, based on\n\nbit(s) from the Xoroshiro128** PRNG. All\
  \ other bits are left unchanged.\n\nSrc[4:0] indicates the bit number (0\u201431). For a range of bits,\
  \ Src[4:0] indicates the base bit number (0\u201431) and\n\nSrc[9:5] indicates how many contiguous bits\
  \ beyond the base should be affected (1\u201331).\n\nA 9-bit literal Src is enough to express the base\
  \ bit (Src[4:0]) and a range of up to 16 contiguous bits (Src[8:5]). If\n\nneeded, use the augmented\
  \ literal feature (##Src) to augment Src to a 10-bit literal value\u2014 this inserts an AUGS\n\ninstruction\
  \ prior.\n\nWhen Src is a register, the register's value bits [9:0] are used as-is to form the 10-bit\
  \ ID range, unless a SETQ\n\ninstruction immediately precedes the BITRND instruction; substituting SETQ's\
  \ Dest[4:0] in place of value bits[9:5],\n\nfor BITRND's use.\n\nIf the WCZ effect is speci\uFB01ed,\
  \ the C and Z \uFB02ags are updated to the original state of Dest's base bit, identi\uFB01ed by Src.\n\
  \nBITZ / BITNZ\n\nBit Z or not Z\n\nBit Operation Instruction - Set bit(s) low/high according to Z or\
  \ !Z.\n\nBITZ    Dest, {#}Src {WCZ}\n\nBITNZ Dest, {#}Src {WCZ}\n\nResult: Dest bit(s) described by\
  \ Src are set to Z or !Z; the rest are left as-is.\n\n\u25CF   Dest is the register whose value will\
  \ have one or more bits set to Z or !Z.\n\n\u25CF   Src is a register, 9-bit literal, or 10-bit augmented\
  \ literal whose value identi\uFB01es the bit(s) to modify.\n\n\u25CF   WCZ is an optional effect to\
  \ update \uFB02ags.\n\nCOND INSTR         FX     DEST          SRC           Write            C Flag\
  \              Z Flag             Clocks\n\nEEEE 0100100 CZI DDDDDDDDD SSSSSSSSS                   D\
  \         Original D base bit Original D base bit         2\n\nEEEE 0100101 CZI DDDDDDDDD SSSSSSSSS\
  \                   D         Original D base bit Original D base bit         2\n\nBITZ or BITNZ alters\
  \ the Dest bit(s) designated by Src to equal the state, or inverse state, of the Z \uFB02ag. All other\n\
  \nbits are left unchanged.\n\nSrc[4:0] indicates the bit number (0\u201431). For a range of bits, Src[4:0]\
  \ indicates the base bit number (0\u201431) and\n\nSrc[9:5] indicates how many contiguous bits beyond\
  \ the base should be affected (1\u201331).\n\nA 9-bit literal Src is enough to express the base bit\
  \ (Src[4:0]) and a range of up to 16 contiguous bits (Src[8:5]). If\n\nneeded, use the augmented literal\
  \ feature (##Src) to augment Src to a 10-bit literal value\u2014 this inserts an AUGS\n\ninstruction\
  \ prior.\n\nWhen Src is a register, the register's value bits [9:0] are natrally used as-is to form\
  \ the 10-bit ID range, unless a\n\nSETQ instruction immediately precedes the BITZ / BITNZ instruction;\
  \ substituting SETQ's Dest[4:0] in place of\n\nvalue bits[9:5], for BITZ / BITNZ's use.\n\nIf the WCZ\
  \ effect is speci\uFB01ed, the C and Z \uFB02ags are updated to the original state of Dest's base bit,\
  \ identi\uFB01ed by Src."
flags_affected:
  Z:
    formula: original D[S[4:0]]
parameters:
- Dest is the register whose value will have one or more bits set randomly low or high.
- "Src is a register, 9-bit literal, or 10-bit augmented literal whose value identi\uFB01es the bit(s)\
  \ to modify."
- "WCZ is an optional effect to update \uFB02ags."
- Dest is the register whose value will have one or more bits set to Z or !Z.
- "Src is a register, 9-bit literal, or 10-bit augmented literal whose value identi\uFB01es the bit(s)\
  \ to modify."
- "WCZ is an optional effect to update \uFB02ags."
documentation_source: PASM2 Manual 2022/11/01 Pages 31-147
documentation_level: comprehensive
compiler_operand_format:
  name: operand_bitx
  pattern: D,S/#
  description: 'Bit manipulation with optional effect flags: Destination register, bit position'
  valueType: 1
compiler_encoding:
  operandFormat: 1
enhancement_source: PNUT_TS_v2.0_complete_operand_integration_2025-09-13
last_updated: '2025-09-19'
brief_description: Bit random
category: Bit Operation Instruction - Set bit(s) random low/high.
result: Dest bit(s) described by Src are set to Z or !Z; the rest are left as-is.
syntax_variants:
- BITRND Dest, {#}Src {WCZ}
- BITRND alters the Dest bit(s) designated by Src to each be an independent random low and high value,
  based on
- instruction immediately precedes the BITRND instruction; substituting SETQ's Dest[4:0] in place of value
  bits[9:5],
manual_extraction_date: '2025-01-19'
