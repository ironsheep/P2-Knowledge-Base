instruction: CMPSUB
syntax: CMPSUB Dest, {#}Src {WC|WZ|WCZ}
encoding: EEEE 0010111 CZI DDDDDDDDD SSSSSSSSS                 D1
timing:
  cycles: 2
  type: fixed
group: Math Instruction - Compare two unsigned values and subtract the second if it is lesser or equal.
description: "CMPSUB compares the unsigned values of Dest and Src, and if Src is less than or equal to\
  \ Dest then it is Result: Dest is decremented by Src unless it is less than Src, and the comparison\
  \ results are optionally written to the C and Z flags.\n\nCMPSUB compares the unsigned values of Dest\
  \ and Src, and if Src is less than or equal to Dest then it is\n\nsubtracted from Dest. Optionally,\
  \ the C and Z \uFB02ags are set to indicate the comparison and operation results.\n\nIf the WC or WCZ\
  \ effect is speci\uFB01ed, the C \uFB02ag is set (1) if Dest was greater than or equal to Src.\n\nIf\
  \ the WZ or WCZ effect is speci\uFB01ed, the Z \uFB02ag is set (1) if the result equals 0."
flags_affected:
  C:
    formula: 1, else D same and C = 0
parameters:
- Dest is the register containing the value to compare with Src and is the destination written to if a
  subtraction is performed.
- Src is a register, 9-bit literal, or 32-bit augmented literal whose value is compared with and possibly
  subtracted from Dest.
- "WC, WZ, or WCZ are optional effects to update \uFB02ags."
documentation_source: PASM2 Manual 2022/11/01 Pages 31-147
documentation_level: comprehensive
compiler_operand_format:
  name: operand_ds
  pattern: D,S/#
  description: Destination register, Source register or immediate value
  valueType: 0
compiler_encoding:
  operandFormat: 0
enhancement_source: PNUT_TS_v2.0_complete_operand_integration_2025-09-13
last_updated: '2025-09-19'
brief_description: Compare and subtract
category: Math Instruction - Compare two unsigned values and subtract the second if it is lesser or equal.
result: Dest is decremented by Src unless it is less than Src, and the comparison results are optionally
  written to
syntax_variants:
- CMPSUB Dest, {#}Src {WC|WZ|WCZ}
- CMPSUB compares the unsigned values of Dest and Src, and if Src is less than or equal to Dest then it
  is
manual_extraction_date: '2025-01-19'
