# Chip Gracey Clarification: CMPSX Instruction
# Layer 4 Enrichment Data - ABSOLUTE Authority

clarification_entry:
  clarification_id: "chip_2025-09-02_CMPSX_005"
  instruction: "CMPSX"
  
  source_metadata:
    provider: "Chip Gracey"
    provider_role: "P2 Designer"
    date: "2025-09-02"
    authority_verification: "CHIP_GRACEY_DIRECT"
    trust_level: "GREEN_HIGHEST"
    authority_level: "ABSOLUTE"
    source_document: "chip-instruction-clarifications-2025-09-02.md"
    extraction_method: "direct_expert_clarification"
    
  semantic_clarification:
    function: "Compare with Sign Extension - Critical for multi-word signed comparisons"
    syntax: "CMPSX D,{#}S {WC/WZ/WCZ}"
    
    detailed_behavior:
      - "X = D - S - C flag (result not stored)"
      - "C = true sign of comparison"
      - "Z = Z AND (X == 0)"
      
    critical_usage:
      pattern: "final_instruction_signed_multiword"
      description: "Used as the FINAL instruction in multi-word signed compare"
      purpose: "Provides true sign of entire multi-word comparison"
      maintains: "cumulative equality detection"
      
    technical_details:
      c_flag_meaning: "true sign of comparison, not borrow"
      z_flag_behavior: "cumulative AND operation for equality"
      position_in_chain: "terminal instruction only"
      result_handling: "comparison result not stored in D"
      
    use_cases:
      - "Capping multi-long signed comparisons"
      - "Extended precision signed comparison"
      - "Multi-word equality/ordering tests"
      
  relationships:
    instruction_family: "CMP_family_extended"
    suffix_pattern:
      S: "true sign instead of carry/borrow" 
      X: "includes carry/borrow in operation"
      SX: "both carry inclusion AND true sign result"
      
    related_instructions:
      - "CMP"     # basic comparison
      - "CMPX"    # compare with borrow
      - "CMPS"    # compare with sign
      - "ADDSX"   # add equivalent
      - "SUBSX"   # subtract equivalent
      
    programming_pattern: "signed_multiword_arithmetic"
    family_overview: "comprehensive_ADD_SUB_CMP_matrix"
    
  programming_insights:
    critical_pattern: "FINAL instruction in signed multi-word operations"
    why_final: "Converts borrow chain to true sign indication"
    sign_vs_borrow: "Returns actual mathematical sign comparison"
    multiword_role: "Terminates extended precision signed comparisons"
    
  gap_impact:
    previous_status: "semantics_missing"
    clarification_impact: "complete_semantic_definition_plus_patterns"
    enables_analysis:
      - "extended_precision_arithmetic_matrix"
      - "signed_arithmetic_patterns"
      - "multiword_calculation_frameworks"
      - "ADD_SUB_CMP_family_relationships"

  validation:
    completeness_score: 98
    authority_confirmed: true
    integration_ready: true
    cross_references_available: true
    programming_patterns_included: true