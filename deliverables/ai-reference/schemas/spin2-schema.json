{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ironsheepproductionsllc.github.io/P2-Knowledge-Base/schemas/spin2-schema.json",
  "title": "SPIN2 Language Schema",
  "description": "JSON schema for Parallax Propeller 2 SPIN2 high-level language",
  "version": "1.0.0",
  "type": "object",
  "properties": {
    "keywords": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "category": {
            "type": "string",
            "enum": ["control", "declaration", "directive", "operator", "builtin"]
          },
          "description": {"type": "string"},
          "syntax": {"type": "string"},
          "examples": {"type": "array", "items": {"type": "string"}}
        },
        "required": ["name", "category", "description"]
      }
    },
    "operators": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "symbol": {"type": "string"},
          "name": {"type": "string"},
          "precedence": {"type": "integer", "minimum": 1, "maximum": 20},
          "associativity": {"type": "string", "enum": ["left", "right", "none"]},
          "operands": {"type": "integer", "minimum": 1, "maximum": 3},
          "category": {
            "type": "string", 
            "enum": ["arithmetic", "logical", "bitwise", "comparison", "assignment", "postfix"]
          }
        },
        "required": ["symbol", "name", "precedence", "associativity", "operands", "category"]
      }
    },
    "methods": {
      "type": "array",
      "items": {
        "type": "object", 
        "properties": {
          "name": {"type": "string"},
          "returnType": {"type": "string"},
          "parameters": {"type": "array"},
          "description": {"type": "string"},
          "category": {"type": "string", "enum": ["builtin", "math", "string", "conversion", "io"]}
        },
        "required": ["name", "description", "category"]
      }
    },
    "blocks": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "name": {"type": "string"},
          "purpose": {"type": "string"},
          "syntax": {"type": "string"},
          "requiredSections": {"type": "array", "items": {"type": "string"}},
          "optionalSections": {"type": "array", "items": {"type": "string"}}
        },
        "required": ["name", "purpose", "syntax"]
      }
    },
    "precedenceTable": {
      "type": "array",
      "items": {
        "type": "object",
        "properties": {
          "level": {"type": "integer"},
          "operators": {"type": "array", "items": {"type": "string"}},
          "associativity": {"type": "string", "enum": ["left", "right", "none"]}
        },
        "required": ["level", "operators", "associativity"]
      }
    }
  },
  "required": ["keywords", "operators", "methods", "blocks", "precedenceTable"]
}